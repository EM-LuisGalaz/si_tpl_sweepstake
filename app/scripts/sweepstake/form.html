<div class="alert alert-{{vm.message.type}}" role="alert" ng-show="vm.message.show">
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
  <ul ng-if="vm.message.type === 'danger'">
    <li ng-repeat="msg in vm.message.msg">{{ msg }}</li>
  </ul>
  <p ng-if="vm.message.type === 'success'">
    {{ vm.message.msg }}
  </p>
</div>

<form name="sweepstake" ng-submit="submitForm(sweepstake.$valid)" novalidate>
  <div ng-repeat="field in form.fields" ng-form="sweepstake" class="{{field.nameClass}}">

    <div 
      ng-if="field.type==='text'" 
      class="form-group" 
      ng-class="{ 'has-error' : sweepstake.{{field.nameClass}}.$invalid && !sweepstake.{{field.nameClass}}.$pristine }"
    >
      <label for="{{field.nameClass}}">{{field.placeholder}}</label>
      <input type="text"
         name="{{field.nameClass}}"
         class="form-control"
         ng-required="field.isRequired"
         ng-model="field.value"
         placeholder="{{field.placeholder}}"
      />
       <div ng-show="!sweepstake.{{field.nameClass}}.$pristine">
        <p class="error" ng-show="sweepstake.{{field.nameClass}}.$error.required">The field is required.</p>
      </div>
    </div>

    <div 
      ng-if="field.type==='tel'" 
      class="form-group" 
      ng-class="{ 'has-error' : sweepstake.{{field.nameClass}}.$invalid && !sweepstake.{{field.nameClass}}.$pristine }"
    >
      <label for="{{field.nameClass}}">{{field.placeholder}}</label>
      <input type="text"
         name="{{field.nameClass}}"
         class="form-control"
         ng-required="field.isRequired"
         ng-model="field.value"
         placeholder="{{field.placeholder}}"
         ng-pattern="/^\(?(\d{3})\)?[ .-]?(\d{3})[ .-]?(\d{4})$/"
      />
       <div ng-show="!sweepstake.{{field.nameClass}}.$pristine">
        <p class="error" ng-show="sweepstake.{{field.nameClass}}.$error.required">The field is required.</p>
        <p class="error" ng-show="sweepstake.{{field.nameClass}}.$invalid">The field is not a number.</p>
      </div>
    </div>

    <div 
      ng-if="field.type==='url'" 
      class="form-group" 
      ng-class="{ 'has-error' : sweepstake.{{field.nameClass}}.$invalid && !sweepstake.{{field.nameClass}}.$pristine }"
    >
      <label for="{{field.nameClass}}">{{field.placeholder}}</label>
      <input type="url"
         name="{{field.nameClass}}"
         class="form-control"
         ng-required="field.isRequired"
         ng-model="field.value"
         placeholder="{{field.placeholder}}"
      />
       <div ng-show="!sweepstake.{{field.nameClass}}.$pristine">
        <p class="error" ng-show="sweepstake.{{field.nameClass}}.$error.required">The field is required.</p>
        <p class="error" ng-show="sweepstake.{{field.nameClass}}.$error.url">The field is not a valid url.</p>
      </div>
    </div>

    <div 
      ng-if="field.type==='email'" 
      class="form-group" 
      ng-class="{ 'has-error' : sweepstake.{{field.nameClass}}.$invalid && !sweepstake.{{field.nameClass}}.$pristine }"
    >
      <label for="{{field.nameClass}}">{{field.placeholder}}</label>
      <input type="email"
         name="{{field.nameClass}}"
         class="form-control"
         ng-required="field.isRequired"
         ng-model="field.value"
         placeholder="{{field.placeholder}}"
      />
      <div ng-show="!sweepstake.{{field.nameClass}}.$pristine">
        <p class="error" ng-show="sweepstake.{{field.nameClass}}.$error.required">The field is required.</p>
        <p class="error" ng-show="sweepstake.{{field.nameClass}}.$invalid">The field is not a valid email.</p>
      </div>
    </div>

    <div 
      ng-if="field.type==='number'" 
      class="form-group" 
      ng-class="{ 'has-error' : sweepstake.{{field.nameClass}}.$invalid && !sweepstake.{{field.nameClass}}.$pristine }"
    >
      <label for="{{field.nameClass}}">{{field.placeholder}}</label>
      <input type="number"
         name="{{field.nameClass}}"
         class="form-control"
         ng-required="field.isRequired"
         ng-model="field.value"
         placeholder="{{field.placeholder}}"
      />
       <div ng-show="!sweepstake.{{field.nameClass}}.$pristine">
        <p class="error" ng-show="sweepstake.{{field.nameClass}}.$error.required">The field is required.</p>
        <p class="error" ng-show="sweepstake.{{field.nameClass}}.$error.number">The field is not a number.</p>
      </div>
    </div>

    <div 
      ng-if="field.type==='checkbox'" 
      class="checkbox" 
      ng-class="{ 'has-error' : sweepstake.{{field.nameClass}}.$invalid && !sweepstake.{{field.nameClass}}.$pristine }"
    >
      <label for="{{field.nameClass}}">
        <input type="checkbox"
           name="{{field.nameClass}}"
           ng-required="field.isRequired"
           ng-model="field.value"
           placeholder="{{field.placeholder}}"
        />
        {{field.placeholder}}
      </label>
       <div ng-show="!sweepstake.{{field.nameClass}}.$pristine">
        <p class="error" ng-show="sweepstake.{{field.nameClass}}.$error.required">The field is required.</p>
      </div>
    </div>

    <div 
      ng-if="field.type==='date' || field.type==='birthdate'" 
      class="form-group" 
      ng-class="{ 'has-error' : sweepstake.{{field.nameClass}}.$invalid && !sweepstake.{{field.nameClass}}.$pristine }"
    >
      <label for="{{field.nameClass}}">{{field.placeholder}}</label>
      <input type="date"
         name="{{field.nameClass}}"
         class="form-control"
         ng-required="field.isRequired"
         ng-model="field.value"
         placeholder="{{field.placeholder}}"
      />
       <div ng-show="!sweepstake.{{field.nameClass}}.$pristine">
        <p class="error" ng-show="sweepstake.{{field.nameClass}}.$error.required">The field is required.</p>
        <p class="error" ng-show="sweepstake.{{field.nameClass}}.$invalid">The field is not a valid date.</p>
      </div>
    </div>

    <div 
      ng-if="field.type==='textarea'" 
      class="form-group" 
      ng-class="{ 'has-error' : sweepstake.{{field.nameClass}}.$invalid && !sweepstake.{{field.nameClass}}.$pristine }"
    >
      <label for="{{field.nameClass}}">{{field.placeholder}}</label>
      <textarea
         name="{{field.nameClass}}"
         class="form-control"
         ng-required="field.isRequired"
         ng-model="field.value"
         placeholder="{{field.placeholder}}"
      ></textarea>
       <div ng-show="!sweepstake.{{field.nameClass}}.$pristine">
        <p class="error" ng-show="sweepstake.{{field.nameClass}}.$error.required">The field is required.</p>
      </div>
    </div>

  </div>

  <input type="submit" class="btn btn-default pull-right" value="Submit" ng-disabled="sweepstake.$invalid">

</form>